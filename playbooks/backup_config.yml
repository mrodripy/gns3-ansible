---
- name: Backup Router Configuration
  hosts: all
  gather_facts: no
  connection: ansible.netcommon.network_cli

  tasks:
    - name: Get running configuration
      cisco.ios.ios_command:
        commands: show running-config
      register: config

    - name: Display backup status
      debug:
        msg: "Backup successful. Configuration size: {{ config.stdout[0] | length }} characters"

    - name: Save to local file (example)
      ansible.builtin.copy:
        content: "{{ config.stdout[0] }}"
        dest: "./backups/{{ inventory_hostname }}-{{ ansible_date_time.date }}.cfg"
      delegate_to: localhost
      when: false  # Disabled by default, set to true to enable file saving
